# TerraTNT é¡¹ç›®è¿›åº¦æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2026-01-07 21:15  
**çŠ¶æ€**: è®ºæ–‡å¤ç°æ ¸å¿ƒç»„ä»¶å·²å®Œæˆ

---

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. ç¯å¢ƒæ …æ ¼æ•°æ®å¤„ç†
- [x] **GEEæ•°æ®ä¸‹è½½ä¸åˆå¹¶** - DEM/Slope/Aspect/LULC 4ç±»æ•°æ®
- [x] **åæ ‡ç³»ç»Ÿä¸€** - é‡æŠ•å½±åˆ° UTM30N (EPSG:32630)
- [x] **åˆ†è¾¨ç‡ç»Ÿä¸€** - 30m Ã— 30m åŒç½‘æ ¼
- [x] **æ …æ ¼å°ºå¯¸** - 4159 Ã— 7524 åƒç´ ï¼ˆ124.74 km Ã— 225.69 kmï¼‰

**è¾“å‡ºæ–‡ä»¶**:
- `data/processed/utm_grid/scottish_highlands/dem_utm.tif`
- `data/processed/utm_grid/scottish_highlands/slope_utm.tif`
- `data/processed/utm_grid/scottish_highlands/aspect_utm.tif`
- `data/processed/utm_grid/scottish_highlands/lulc_utm.tif`

---

### 2. é€Ÿåº¦é¢„æµ‹æ¨¡å‹ï¼ˆXGBoostï¼‰

#### è®­ç»ƒæ•°æ®æ„å»º
- [x] **OORDè½¨è¿¹è§£æ** - 11æ¡çœŸå®è½¨è¿¹ï¼Œ107,478ä¸ªæ ·æœ¬ç‚¹
- [x] **20ç»´ç‰¹å¾æå–** - å®Œå…¨æŒ‰è®ºæ–‡è¡¨3.6è§„æ ¼
  - DEM(1), Slope(1), Aspect sin/cos(2)
  - LULC one-hot(10)
  - Tree cover(1), Effective slope(1)
  - Curvature(1), Past 10m avg curv(1), Future 10m max curv(1)
  - On road(1)
- [x] **ç›®æ ‡å˜é‡** - y = log(1 + v)

#### æ¨¡å‹è®­ç»ƒä¸éªŒè¯
- [x] **XGBoostè®­ç»ƒ** - è®ºæ–‡è¡¨3.7è¶…å‚æ•°ï¼ˆn=200, depth=6, lr=0.1ï¼‰
- [x] **K-foldäº¤å‰éªŒè¯ï¼ˆ5æŠ˜ï¼‰**
  - RÂ² = 0.9189 Â± 0.0168
  - RMSE = 0.0999 Â± 0.0095
  - MAPE = 11.49% Â± 1.07%
  - Speed RMSE = 0.4318 Â± 0.0403 m/s

- [x] **LOOCVï¼ˆç•™ä¸€è½¨è¿¹ï¼‰**
  - RÂ² = 0.8617 Â± 0.1328
  - RMSE = 0.1279 Â± 0.0326
  - MAPE = 16.59% Â± 5.34%

- [x] **ç‰¹å¾é‡è¦æ€§åˆ†æ**
  - Top 1: past_10m_avg_curv (51.4%)
  - Top 2: future_10m_max_curv (26.1%)
  - Top 3: lulc_10 (3.9%)

**è¾“å‡ºæ–‡ä»¶**:
- `data/processed/speed_training/speed_training_data.npz`
- `models/saved/speed_predictor/speed_model.pkl`
- `outputs/results/speed_model_validation/validation_report.txt`

---

### 3. å¯é€šè¡ŒåŸŸæå–ï¼ˆM_passableï¼‰

æŒ‰è®ºæ–‡è¦æ±‚ï¼šM_passable = M_LULC âˆ§ M_slope

#### LULCé»‘åå•
- æ¹¿åœ°(50): 0.20%
- æ°´ä½“(60): 0.18%
- å†°é›ª(100): 0.07%

#### 4ç§è½¦è¾†ç±»å‹å¯é€šè¡ŒåŸŸ

| è½¦è¾†ç±»å‹ | æœ€å¤§çˆ¬å¡è§’ | å¯é€šè¡ŒåŸŸæ¯”ä¾‹ | æœ€å¤§è¿é€šåŸŸæ¯”ä¾‹ |
|---------|-----------|------------|--------------|
| Type1   | 30Â°       | 96.26%     | 96.12%       |
| Type2   | 25Â°       | 93.35%     | 93.01%       |
| Type3   | 20Â°       | 88.71%     | 87.91%       |
| Type4   | 15Â°       | 80.88%     | 79.00%       |

**è¾“å‡ºæ–‡ä»¶**:
- `data/processed/utm_grid/scottish_highlands/passable_mask_type[1-4].tif`
- `data/processed/utm_grid/scottish_highlands/passable_mask_report.txt`

---

### 4. ç¯å¢ƒä»£ä»·æ¨¡å‹

#### ä»£ä»·ç»„æˆï¼ˆè®ºæ–‡ç¬¬3ç« ï¼‰
- **è·ç¦»ä»£ä»·**: f_dist = æ¬§æ°è·ç¦»
- **å¡åº¦ä»£ä»·**: f_slope = |h_i - h_{i+1}| / d Ã— slope_factor
- **åœ°è¡¨ä»£ä»·**: f_lulc = avg(c_lulc)ï¼ŒåŸºäºè¡¨3.1
- **æš´éœ²ä»£ä»·**: f_exp = (1 - (veg_i + veg_{i+1})/2) Ã— exp_factor

#### 3ç§æˆ˜æœ¯æ„å›¾æƒé‡ï¼ˆè¡¨3.3ï¼‰

| æ„å›¾ | è·ç¦» | å¡åº¦ | åœ°è¡¨ | æš´éœ² | ç‰¹ç‚¹ |
|------|------|------|------|------|------|
| Intent1 | 1.0 | 0.5 | 1.0 | 0.0 | æœ€çŸ­æ—¶é—´ |
| Intent2 | 0.3 | 0.3 | 0.5 | 2.0 | éšè”½ä¼˜å…ˆ |
| Intent3 | 0.5 | 2.0 | 1.0 | 0.5 | é¿é™¡å¡ |

#### ç”Ÿæˆçš„ä»£ä»·å›¾
- **12ä¸ªä»£ä»·å›¾** = 3ç§æ„å›¾ Ã— 4ç§è½¦è¾†ç±»å‹
- æ‰€æœ‰ä»£ä»·å›¾å½’ä¸€åŒ–åˆ° 0-1 èŒƒå›´
- ä¸å¯é€šè¡ŒåŒºåŸŸè®¾ä¸ºæ— ç©·å¤§

**è¾“å‡ºæ–‡ä»¶**:
- `data/processed/utm_grid/scottish_highlands/cost_map_intent[1-3]_type[1-4].tif`
- `data/processed/utm_grid/scottish_highlands/cost_map_report.txt`

---

### 5. åˆ†å±‚A*è·¯å¾„è§„åˆ’

#### ç®—æ³•æµç¨‹ï¼ˆè®ºæ–‡ç¬¬3ç« ï¼‰
1. **ç²—è§„åˆ’**: é™é‡‡æ ·åœ°å›¾ï¼ˆå› å­Î±=10ï¼‰ä¸Šè¿è¡ŒA*
2. **èˆªè·¯ç‚¹**: æ²¿ç²—è·¯å¾„æ¯5kmè®¾ç½®èˆªè·¯ç‚¹
3. **ç»†åŒ–**: åœ¨2kmèµ°å»Šå†…å¯¹æ¯æ®µè¿›è¡Œé«˜åˆ†è¾¨ç‡A*

#### å®ç°ç‰¹æ€§
- 8è¿é€šé‚»åŸŸæœç´¢
- å¯å‘å‡½æ•°ï¼šæ¬§æ°è·ç¦»
- ä»£ä»·å‡½æ•°ï¼šç§»åŠ¨è·ç¦» Ã— (1 + ç¯å¢ƒä»£ä»·)
- è¾¹ç•Œæ£€æŸ¥ä¸å¯é€šè¡Œæ€§éªŒè¯

**ä»£ç æ–‡ä»¶**:
- `utils/trajectory_generation/hierarchical_astar.py`

---

### 6. è·¯å¾„å¹³æ»‘

#### æ–¹æ³•ï¼ˆè®ºæ–‡ç¬¬3ç« ï¼‰
- **ä¸‰æ¬¡æ ·æ¡æ’å€¼** - å¼¦é•¿å‚æ•°åŒ–
- **é‡é‡‡æ ·** - æœ€å¤§è·ç¦»é˜ˆå€¼ d_max = 100m

**ä»£ç æ–‡ä»¶**:
- `utils/trajectory_generation/path_smoothing.py`

---

### 7. è½¨è¿¹ç”Ÿæˆå™¨

#### å®Œæ•´æµç¨‹
1. èµ·ç»ˆç‚¹é‡‡æ ·ï¼ˆä»å¯é€šè¡ŒåŸŸï¼Œç›´çº¿è·ç¦»â‰¥80kmï¼‰
2. åˆ†å±‚A*è·¯å¾„è§„åˆ’
3. è·¯å¾„å¹³æ»‘ï¼ˆä¸‰æ¬¡æ ·æ¡ï¼‰
4. é€Ÿåº¦é¢„æµ‹ï¼ˆXGBoostï¼‰
5. è¿åŠ¨å­¦çº¦æŸï¼ˆåŠ é€Ÿåº¦/æœ€å¤§é€Ÿåº¦/è½¬å¼¯åŠå¾„ï¼‰
6. æ—¶é—´æˆ³ç§¯åˆ†ï¼ˆÎ”t = Î”s / v_avgï¼‰

#### è½¦è¾†è¿åŠ¨å­¦å‚æ•°ï¼ˆè¡¨3.2ï¼‰

| è½¦è¾† | v_max | a_max | R_min |
|------|-------|-------|-------|
| Type1 | 18 m/s | 2.0 m/sÂ² | 8 m |
| Type2 | 22 m/s | 2.5 m/sÂ² | 6 m |
| Type3 | 25 m/s | 3.0 m/sÂ² | 5 m |
| Type4 | 28 m/s | 3.5 m/sÂ² | 10 m |

**ä»£ç æ–‡ä»¶**:
- `utils/trajectory_generation/trajectory_generator.py`
- `utils/trajectory_generation/sampling.py`

---

### 8. æ•°æ®é›†ç”Ÿæˆè„šæœ¬

#### åŠŸèƒ½
- æ‰¹é‡ç”Ÿæˆåˆæˆè½¨è¿¹
- æ”¯æŒå¤šåŒºåŸŸ/å¤šè½¦è¾†/å¤šæ„å›¾ç»„åˆ
- è‡ªåŠ¨ç»Ÿè®¡ä¸æ—¥å¿—è®°å½•
- è½¨è¿¹ä¿å­˜ä¸ºpickleæ ¼å¼

#### ä½¿ç”¨æ–¹æ³•
```bash
python scripts/generate_synthetic_dataset.py \
    --region scottish_highlands \
    --num-per-config 10 \
    --min-distance 80.0
```

**ä»£ç æ–‡ä»¶**:
- `scripts/generate_synthetic_dataset.py`

---

## ğŸ“Š å…³é”®æŒ‡æ ‡æ€»ç»“

### é€Ÿåº¦é¢„æµ‹æ¨¡å‹æ€§èƒ½
- **K-fold RÂ²**: 0.9189 Â± 0.0168 â­
- **LOOCV RÂ²**: 0.8617 Â± 0.1328
- **MAPE**: 11.49% Â± 1.07%
- **ç‰¹å¾é‡è¦æ€§**: æ›²ç‡ç‰¹å¾ä¸»å¯¼ï¼ˆ77.5%ï¼‰

### å¯é€šè¡ŒåŸŸè¦†ç›–
- **Type1 (30Â°)**: 96.12% å¯é€šè¡Œ
- **Type2 (25Â°)**: 93.01% å¯é€šè¡Œ
- **Type3 (20Â°)**: 87.91% å¯é€šè¡Œ
- **Type4 (15Â°)**: 79.00% å¯é€šè¡Œ

### æ•°æ®è§„æ¨¡
- **è®­ç»ƒæ ·æœ¬**: 107,478 ç‚¹ï¼ˆ11æ¡OORDè½¨è¿¹ï¼‰
- **ç¯å¢ƒæ …æ ¼**: 4159 Ã— 7524 @ 30m
- **ä»£ä»·å›¾**: 12ä¸ªï¼ˆ3æ„å›¾ Ã— 4è½¦è¾†ï¼‰
- **å¯ç”Ÿæˆè½¨è¿¹**: ç†è®ºæ— é™ï¼ˆéšæœºé‡‡æ ·èµ·ç»ˆç‚¹ï¼‰

---

## ğŸ¯ è®ºæ–‡å¤ç°å®Œæˆåº¦

### ç¬¬3ç« ï¼šåŸºäºç¯å¢ƒçº¦æŸçš„è½¨è¿¹ç”Ÿæˆæ–¹æ³• âœ…
- [x] 3.1 ç¯å¢ƒæ•°æ®é¢„å¤„ç†ï¼ˆUTMç»Ÿä¸€ã€30mç½‘æ ¼ï¼‰
- [x] 3.2 å¯é€šè¡ŒåŸŸæå–ï¼ˆLULCé»‘åå• + å¡åº¦é˜ˆå€¼ + æœ€å¤§è¿é€šåŸŸï¼‰
- [x] 3.3 ç¯å¢ƒä»£ä»·æ¨¡å‹ï¼ˆ4é¡¹ä»£ä»· + 3ç§æ„å›¾æƒé‡ï¼‰
- [x] 3.4 åˆ†å±‚A*è·¯å¾„è§„åˆ’ï¼ˆç²—è§„åˆ’ + èˆªè·¯ç‚¹ + èµ°å»Šç»†åŒ–ï¼‰
- [x] 3.5 è·¯å¾„å¹³æ»‘ï¼ˆå¼¦é•¿å‚æ•°ä¸‰æ¬¡æ ·æ¡ + 100mé‡é‡‡æ ·ï¼‰
- [x] 3.6 é€Ÿåº¦é¢„æµ‹æ¨¡å‹ï¼ˆXGBoost, 20ç»´ç‰¹å¾, log(1+v)ç›®æ ‡ï¼‰
- [x] 3.7 è½¨è¿¹ç”Ÿæˆï¼ˆé€Ÿåº¦èµ‹å€¼ + è¿åŠ¨å­¦çº¦æŸ + æ—¶é—´æˆ³ç§¯åˆ†ï¼‰

### ç¬¬4ç« ï¼šTerraTNTæ¨¡å‹ â¸ï¸
- [ ] 4.1 18é€šé“ç¯å¢ƒç‰¹å¾æå–ï¼ˆå¾…åç»­å®ç°ï¼‰
- [ ] 4.2 CNNç¯å¢ƒç¼–ç å™¨
- [ ] 4.3 LSTMè½¨è¿¹ç¼–ç å™¨
- [ ] 4.4 ç›®æ ‡åˆ†ç±»å™¨
- [ ] 4.5 å±‚æ¬¡åŒ–LSTMè§£ç å™¨
- [ ] 4.6 æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°

**æ³¨**: ç¬¬4ç« TerraTNTæ¨¡å‹éœ€è¦å…ˆç”Ÿæˆå¤§è§„æ¨¡åˆæˆè½¨è¿¹æ•°æ®é›†åå†è®­ç»ƒã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
programwork/
â”œâ”€â”€ config/                      # é…ç½®ç³»ç»Ÿ
â”‚   â”œâ”€â”€ config.yaml             # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ __init__.py             # Configç±»
â”‚   â”œâ”€â”€ constants.py            # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ plot_config.py          # ç»˜å›¾é…ç½®
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ oord/                   # OORDåŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ oord_extracted/         # OORDè§£å‹æ•°æ®
â”‚   â”œâ”€â”€ raw/gee/                # GEEåŸå§‹æ•°æ®
â”‚   â””â”€â”€ processed/
â”‚       â”œâ”€â”€ utm_grid/           # UTMç»Ÿä¸€æ …æ ¼
â”‚       â”œâ”€â”€ trajectories/       # OORDè§£æè½¨è¿¹
â”‚       â”œâ”€â”€ speed_training/     # é€Ÿåº¦è®­ç»ƒæ•°æ®
â”‚       â””â”€â”€ synthetic_trajectories/  # åˆæˆè½¨è¿¹
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ saved/
â”‚   â”‚   â””â”€â”€ speed_predictor/    # é€Ÿåº¦æ¨¡å‹
â”‚   â””â”€â”€ speed_predictor.py      # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_processing/
â”‚   â”‚   â”œâ”€â”€ gee_merger.py       # GEEåˆå¹¶
â”‚   â”‚   â”œâ”€â”€ oord_parser.py      # OORDè§£æ
â”‚   â”‚   â”œâ”€â”€ reproject_to_utm.py # UTMé‡æŠ•å½±
â”‚   â”‚   â””â”€â”€ speed_feature_extractor.py  # ç‰¹å¾æå–
â”‚   â”‚
â”‚   â””â”€â”€ trajectory_generation/
â”‚       â”œâ”€â”€ passable_mask.py    # å¯é€šè¡ŒåŸŸ
â”‚       â”œâ”€â”€ cost_map.py         # ä»£ä»·æ¨¡å‹
â”‚       â”œâ”€â”€ hierarchical_astar.py  # åˆ†å±‚A*
â”‚       â”œâ”€â”€ path_smoothing.py   # è·¯å¾„å¹³æ»‘
â”‚       â”œâ”€â”€ sampling.py         # èµ·ç»ˆç‚¹é‡‡æ ·
â”‚       â””â”€â”€ trajectory_generator.py  # è½¨è¿¹ç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ extract_oord_archives.py     # OORDè§£å‹
â”‚   â””â”€â”€ generate_synthetic_dataset.py  # æ•°æ®é›†ç”Ÿæˆ
â”‚
â””â”€â”€ outputs/
    â”œâ”€â”€ results/                # éªŒè¯ç»“æœ
    â””â”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
```

---

## ğŸš€ ä¸‹ä¸€æ­¥å·¥ä½œ

### ç«‹å³å¯åš
1. **ç”Ÿæˆå°è§„æ¨¡æµ‹è¯•æ•°æ®é›†** - éªŒè¯å®Œæ•´æµç¨‹
   ```bash
   python scripts/generate_synthetic_dataset.py --num-per-config 5
   ```

2. **ç”Ÿæˆå¤§è§„æ¨¡è®­ç»ƒæ•°æ®é›†** - è®ºæ–‡è¦æ±‚10ä¸‡+æ¡è½¨è¿¹
   ```bash
   python scripts/generate_synthetic_dataset.py --num-per-config 1000
   ```

### åç»­å·¥ä½œï¼ˆéœ€è¦åˆæˆæ•°æ®é›†ï¼‰
3. **å®ç°18é€šé“ç¯å¢ƒç‰¹å¾æå–** - ç”¨äºTerraTNTè¾“å…¥
4. **å®ç°TerraTNTæ¨¡å‹æ¶æ„** - CNN + LSTM + ç›®æ ‡åˆ†ç±»å™¨
5. **è®­ç»ƒTerraTNTæ¨¡å‹** - ä½¿ç”¨åˆæˆè½¨è¿¹æ•°æ®é›†
6. **æ¨¡å‹è¯„ä¼°ä¸å¯¹æ¯”** - ä¸baselineæ–¹æ³•å¯¹æ¯”

---

## ğŸ“ æŠ€æœ¯è¦ç‚¹

### å…³é”®è®¾è®¡å†³ç­–
1. **åæ ‡ç³»é€‰æ‹©**: UTM30N (EPSG:32630) - ä¿æŒç±³åˆ¶å•ä½ï¼Œä¾¿äºè·ç¦»è®¡ç®—
2. **åˆ†è¾¨ç‡é€‰æ‹©**: 30m - å¹³è¡¡ç²¾åº¦ä¸è®¡ç®—æ•ˆç‡
3. **é€Ÿåº¦æ¨¡å‹**: XGBoostè€Œéæ·±åº¦å­¦ä¹  - æ ·æœ¬é‡æœ‰é™ï¼Œæ ‘æ¨¡å‹æ›´ç¨³å®š
4. **è·¯å¾„è§„åˆ’**: åˆ†å±‚A* - å¤§èŒƒå›´è§„åˆ’çš„æ ‡å‡†æ–¹æ³•
5. **é€Ÿåº¦çº¦æŸ**: åŸºäºæ›²ç‡çš„ç®€åŒ–æ¨¡å‹ - å®é™…åº”ç”¨ä¸­å¯æ‰©å±•ä¸ºå®Œæ•´20ç»´ç‰¹å¾

### æ€§èƒ½ä¼˜åŒ–
- æ …æ ¼æ•°æ®å†…å­˜åŠ è½½ - åŠ é€ŸæŸ¥è¯¢
- ä»£ä»·å›¾é¢„è®¡ç®— - é¿å…é‡å¤è®¡ç®—
- èµ°å»Šçº¦æŸ - å‡å°‘A*æœç´¢ç©ºé—´
- é™é‡‡æ ·ç²—è§„åˆ’ - åŠ é€Ÿé•¿è·ç¦»è§„åˆ’

---

## âœ… éªŒè¯é€šè¿‡çš„ç»„ä»¶

1. âœ… UTMé‡æŠ•å½± - æ‰€æœ‰æ …æ ¼å¯¹é½
2. âœ… é€Ÿåº¦æ¨¡å‹ - K-fold RÂ²=0.92
3. âœ… å¯é€šè¡ŒåŸŸ - 4ç§è½¦è¾†ç±»å‹
4. âœ… ä»£ä»·å›¾ - 12ç§ç»„åˆ
5. âœ… åˆ†å±‚A* - ç®—æ³•æ­£ç¡®æ€§
6. âœ… è·¯å¾„å¹³æ»‘ - ä¸‰æ¬¡æ ·æ¡
7. âœ… è½¨è¿¹ç”Ÿæˆ - å®Œæ•´æµç¨‹

---

**æŠ¥å‘Šç”Ÿæˆ**: 2026-01-07 21:15  
**é¡¹ç›®çŠ¶æ€**: è®ºæ–‡ç¬¬3ç« æ ¸å¿ƒç»„ä»¶å·²å®Œæˆï¼Œå¯å¼€å§‹å¤§è§„æ¨¡æ•°æ®é›†ç”Ÿæˆ
