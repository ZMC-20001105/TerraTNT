# 论文修改方案

> 生成日期: 2026-02-15
> 基于: PAPER_FULL_REVIEW.md + PAPER_FIGURES_AUDIT.md

---

## 一、实验完成状态

### ✅ 已完成
- 域内评估 (13模型×7Phase) → `outputs/evaluation/phase_v2_with_faithful/`
- TerraTNT-Env训练+评估 → P3a ADE=3.21km (-38.5% vs Seq2Seq)
- 消融实验 (模块/通道/运动学) → `outputs/evaluation/ablation/`
- Waypoint消融 (2/4/6/8/10) → `outputs/evaluation/control_variables/`
- K敏感性 (K=6~200) → `candidate_k_sensitivity.json`
- 观测长度 (3~15min) → `observation_length_sensitivity.json`
- 跨区域: BF→Donbas, BF→Scottish Highlands
- 轨迹: BF(1166) + SH(600) + DB(204) + CP(201) = 2171条
- 图表: 架构图/训练曲线/Phase对比/消融图 (可靠)
- GitHub推送 ✅

### 🔄 进行中
- 跨区域: BF→Carpathians (评估运行中)

### ❌ 需修复
- 跨区域图表(fig4_25/26/27): 硬编码PLACEHOLDER → 需用真实数据重生成
- 候选K敏感性图: 旧图虚假数据 → 需用真实实验数据重生成
- 箱线图/时间趋势图: 错误模型标签 → 需用faithful数据重生成

---

## 二、P0修改方案（10项）

### P0-1: 删除MDN/GMM/GRU虚假声称
**位置**: 1.2.3节、5.1节

| 位置 | 当前错误 | 修改为 |
|------|---------|--------|
| 1.2.3节 | "通过混合密度网络…表达不确定性" | "通过候选终点概率分布和目标分类器实现对预测不确定性的离散化表达" |
| 5.1节 | "采用门控循环单元…输出高斯混合模型" | "采用双层LSTM网络提取时序特征，通过候选终点分类机制建模目标意图不确定性，输出确定性轨迹预测" |
| 缩略语表 | MDN/GMM/NLL | 标注"仅见于文献综述"或移除 |

### P0-2: 修正摘要数据
**位置**: 中英文摘要

| 项目 | 当前错误 | 修改为 |
|------|---------|--------|
| ADE | 1.23km | **1.25km** (V6R_Robust在P1a) |
| 轨迹数 | 10万余条 | **约2100条** (或"约2100条轨迹，采样生成约1.8万训练样本") |
| 降低比例 | 8.9%~74.5% | **58.7%~83.8%** (vs YNet 58.7%, vs LSTM_only 83.8%) |

建议新增: "在无目标先验场景下，TerraTNT-Env变体ADE=3.21km，比最优基线降低38.5%"

### P0-3: 用真实数据替换实验表格
**位置**: 表4.6~4.14
**数据源**: `outputs/evaluation/phase_v2_with_faithful/phase_v2_results.json`

**表4.6 Phase1a (精确终点先验)**:
| 模型 | ADE(km) | FDE(km) |
|------|---------|---------|
| V6R_Robust(本文) | **1.25** | **2.29** |
| V6_Autoreg | 1.41 | 2.60 |
| LSTM_Env_Goal | 1.41 | 1.43 |
| YNet | 3.03 | 1.02 |
| PECNet | 3.91 | 3.18 |
| Seq2Seq_Attn | 5.98 | 11.99 |
| LSTM_only | 7.72 | 15.84 |

**新增表: Phase3a (无先验)** — 展示TerraTNT-Env:
| 模型 | ADE(km) | FDE(km) |
|------|---------|---------|
| TerraTNT-Env(本文) | **3.21** | **6.16** |
| Seq2Seq_Attn | 5.22 | 10.44 |
| MLP | 6.00 | 12.36 |
| LSTM_only | 6.46 | 13.14 |

**表4.13 消融** (基线=V6R_Robust 1.25km):
| 配置 | ADE(km) | 变化 |
|------|---------|------|
| 完整模型 | 1.25 | — |
| 无环境编码器 | 7.31 | +487% |
| 无历史编码器 | 1.65 | +32% |
| 无目标分类器 | 1.27 | +1.7% |
| MLP替代LSTM | 1.47 | +18% |

**表4.14 环境通道消融**:
| 配置 | ADE(km) | 变化 |
|------|---------|------|
| 无DEM | 2.81 | +125% |
| 无LULC | 3.29 | +164% |
| 无OSM | 1.26 | +0.9% |

### P0-4: 修正训练超参数（表4.3）
| 超参数 | 论文错误值 | 实际值 |
|--------|-----------|--------|
| 批量大小 | 64 | **16** |
| 学习率 | 1e-4 | **1e-3** |
| 补充 | — | Goal dropout=0.15, AMP混合精度, 梯度裁剪=5.0 |

### P0-5: 环境编码器描述（4.1.1节）
论文只描述单尺度CNN，实际使用双尺度(global 100km + local 10km)。
**建议**: 补充双尺度描述，或注明论文为简化架构。

### P0-6: 修正表4.1 ch14
当前: "信息缺失(code 255)" → 修改为: **"树木覆盖度(Tree cover)"**

### P0-7: 修正Phase1样本数（4.3.2节）
当前: 893个 → 实际: **354个**

### P0-8: 修正第5章"四种典型场景"
当前: "四种典型场景" → 修改为: **"三种战术意图"** (与表3.3一致)

### P0-9: 修正OORD全称
缩略语表: "Off-Road Obstacle Dataset" vs 正文3.1.1: "Oxford Offroad Radar Dataset"
→ 统一为正确全称

### P0-10: 修正表3.9 R²数据
当前: "5折训练集R²均超过0.98" → 实际R²=0.926(训练), 0.729(验证)
→ 修改为实际数值

---

## 三、P1修改方案（10项，应当修改）

| # | 问题 | 修改建议 |
|---|------|---------|
| 11 | 第3→4章数据流衔接缺失 | 增加"样本提取"小节，说明滑动窗口切分和26维特征计算 |
| 12 | Phase2描述"域外目标"vs实际"区域先验σ=10km" | 统一为"区域级目标先验" |
| 13 | 表编号不连续(缺3.4/4.5/4.9/4.16) | 重新编号 |
| 14 | 基线只报告4个，实际评估13个 | 至少报告V6R_Robust、YNet、PECNet、Seq2Seq等 |
| 15 | 4.7节消融引用39.8% vs 72.4% vs 实际487% | 统一为实际数据487% |
| 16 | 损失函数缺waypoint loss等 | 补充wp_weight=2.0等 |
| 17 | 候选终点来源"POI" vs 实际"热力图采样" | 修正为热力图采样 |
| 18 | 轨迹生成器"简单LSTM" vs 实际"层次化解码器" | 补充waypoint attention描述 |
| 19 | 图3.1编号冲突 | 重新编号 |
| 20 | 图1.10引用[19]应为[33] | 修正引用 |

---

## 四、需重新生成的图表

### 必须重做
1. **fig4_25/26/27 跨区域图**: Carpathians评估完成后，用4区域真实数据替换PLACEHOLDER
2. **fig4_9 候选K敏感性图**: 用 `candidate_k_sensitivity.json` 真实数据重新生成
3. **箱线图(fig4_box_phase1/2/3)**: 用faithful数据重新生成，包含真正YNet/PECNet

### 已可靠
- fig4_1_architecture ✅
- fig4_6_training_curves ✅
- fig4_7_phase_comparison ✅
- fig4_8_ablation ✅
- fig4_9_10_control_variables (waypoint部分) ✅

---

## 五、论文叙事线调整建议

### 当前问题
论文构建了"概率预测"叙事(MDN/GMM/GRU)，但实际是"确定性预测+离散候选分类"。

### 建议统一叙事
TerraTNT是一个**双模式环境感知轨迹预测框架**:
- **TerraTNT-Goal**: 目标驱动模式，利用候选终点分类+自回归解码，P1a ADE=1.25km
- **TerraTNT-Env**: 环境驱动模式，无需目标先验，P3a ADE=3.21km

核心创新:
1. 18通道环境编码(DEM+LULC+OSM) — 消融显示环境是最关键因素(+487%)
2. 26维运动学+沿轨迹环境历史特征
3. 候选终点分类实现目标意图的离散化建模（非概率密度建模）
4. Goal dropout训练策略实现单一模型的鲁棒性

这个叙事完全基于真实数据支撑，不需要虚构MDN/GMM。
