<svg width="1000" height="800" viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">
    <!-- Definitions for markers and shadows -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#546e7a" />
        </marker>
        <filter id="dropShadow" x="-2%" y="-2%" width="104%" height="104%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
            <feOffset dx="2" dy="2" result="offsetblur" />
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.3" />
            </feComponentTransfer>
            <feMerge>
                <feMergeNode />
                <feMergeNode in="SourceGraphic" />
            </feMerge>
        </filter>
    </defs>

    <!-- Background -->
    <rect width="1000" height="800" fill="#ffffff" />
    
    <!-- Title -->
    <text x="500" y="40" font-family="'Segoe UI', Roboto, Arial" font-size="28" font-weight="700" text-anchor="middle" fill="#263238">TerraTNT 系统工业级分布式架构</text>
    
    <!-- External User/Client -->
    <g filter="url(#dropShadow)">
        <rect x="400" y="70" width="200" height="50" fill="#eceff1" stroke="#546e7a" stroke-width="2" rx="25"/>
        <text x="500" y="102" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#37474f">Remote Client (VNC/Sunlogin)</text>
    </g>

    <!-- Presentation Layer (UI) -->
    <g filter="url(#dropShadow)">
        <rect x="50" y="150" width="900" height="120" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
        <text x="70" y="180" font-family="Arial" font-size="18" font-weight="bold" fill="#0d47a1">UI & Interaction Layer (PyQt5 Framework)</text>
        
        <!-- UI Modules -->
        <rect x="80" y="200" width="150" height="50" fill="#ffffff" stroke="#1976d2" rx="5"/>
        <text x="155" y="230" font-family="Arial" font-size="12" text-anchor="middle">Dashboard & Monitor</text>
        
        <rect x="250" y="200" width="150" height="50" fill="#ffffff" stroke="#1976d2" rx="5"/>
        <text x="325" y="230" font-family="Arial" font-size="12" text-anchor="middle">3D Satellite Vis</text>
        
        <rect x="420" y="200" width="150" height="50" fill="#ffffff" stroke="#1976d2" rx="5"/>
        <text x="495" y="230" font-family="Arial" font-size="12" text-anchor="middle">GIS Canvas (MPL)</text>
        
        <rect x="590" y="200" width="150" height="50" fill="#ffffff" stroke="#1976d2" rx="5"/>
        <text x="665" y="230" font-family="Arial" font-size="12" text-anchor="middle">Data Config Panel</text>
        
        <rect x="760" y="200" width="150" height="50" fill="#ffffff" stroke="#1976d2" rx="5"/>
        <text x="835" y="230" font-family="Arial" font-size="12" text-anchor="middle">Training Console</text>
    </g>

    <!-- Business Logic Layer (Services) -->
    <g filter="url(#dropShadow)">
        <rect x="50" y="300" width="900" height="150" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="10"/>
        <text x="70" y="330" font-family="Arial" font-size="18" font-weight="bold" fill="#1b5e20">Core Service Engine (Business Logic)</text>
        
        <!-- Services -->
        <g>
            <rect x="80" y="350" width="260" height="80" fill="#ffffff" stroke="#388e3c" rx="5"/>
            <text x="210" y="375" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Data Synthesis Engine</text>
            <text x="210" y="395" font-family="Arial" font-size="11" text-anchor="middle">Hierarchical A* Path Planning</text>
            <text x="210" y="415" font-family="Arial" font-size="11" text-anchor="middle">Parallel Multiprocessing Worker</text>
        </g>
        
        <g>
            <rect x="370" y="350" width="260" height="80" fill="#ffffff" stroke="#388e3c" rx="5"/>
            <text x="500" y="375" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Model Orchestrator</text>
            <text x="500" y="395" font-family="Arial" font-size="11" text-anchor="middle">FAS Phase Controller (1/2/3)</text>
            <text x="500" y="415" font-family="Arial" font-size="11" text-anchor="middle">Early Stopping & Checkpointing</text>
        </g>
        
        <g>
            <rect x="660" y="350" width="260" height="80" fill="#ffffff" stroke="#388e3c" rx="5"/>
            <text x="790" y="375" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Evaluation Framework</text>
            <text x="790" y="395" font-family="Arial" font-size="11" text-anchor="middle">Metrics (ADE/FDE/MR)</text>
            <text x="790" y="415" font-family="Arial" font-size="11" text-anchor="middle">Benchmarking vs Baselines</text>
        </g>
    </g>

    <!-- AI/Model Layer -->
    <g filter="url(#dropShadow)">
        <rect x="50" y="480" width="440" height="180" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="10"/>
        <text x="70" y="510" font-family="Arial" font-size="18" font-weight="bold" fill="#e65100">Deep Learning Model Zoo</text>
        
        <rect x="80" y="530" width="180" height="60" fill="#ffe0b2" stroke="#ef6c00" rx="5"/>
        <text x="170" y="555" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">TerraTNT Core</text>
        <text x="170" y="575" font-family="Arial" font-size="10" text-anchor="middle">CNN-Env + LSTM-Hist + Decoder</text>
        
        <rect x="280" y="530" width="180" height="60" fill="#ffffff" stroke="#ef6c00" rx="5"/>
        <text x="370" y="555" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Baselines</text>
        <text x="370" y="575" font-family="Arial" font-size="10" text-anchor="middle">YNet, PECNet, Trajectron++</text>
        
        <rect x="80" y="605" width="380" height="40" fill="#ffffff" stroke="#ef6c00" rx="5"/>
        <text x="270" y="630" font-family="Arial" font-size="12" text-anchor="middle">XGBoost Speed Predictor Engine (OORD Trained)</text>
    </g>

    <!-- Data Persistence Layer -->
    <g filter="url(#dropShadow)">
        <rect x="510" y="480" width="440" height="180" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="10"/>
        <text x="530" y="510" font-family="Arial" font-size="18" font-weight="bold" fill="#880e4f">Data Persistence & Assets</text>
        
        <rect x="540" y="530" width="190" height="110" fill="#ffffff" stroke="#c2185b" rx="5"/>
        <text x="635" y="555" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">GIS Assets (Raster)</text>
        <text x="635" y="580" font-family="Arial" font-size="11" text-anchor="middle">GeoTIFF: DEM, LULC</text>
        <text x="635" y="600" font-family="Arial" font-size="11" text-anchor="middle">Vector: OSM Road Network</text>
        <text x="635" y="620" font-family="Arial" font-size="11" text-anchor="middle">Projection: UTM EPSG:32630</text>
        
        <rect x="745" y="530" width="185" height="110" fill="#ffffff" stroke="#c2185b" rx="5"/>
        <text x="837" y="555" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Trajectory Store</text>
        <text x="837" y="580" font-family="Arial" font-size="11" text-anchor="middle">100k+ Synthetic PKLs</text>
        <text x="837" y="600" font-family="Arial" font-size="11" text-anchor="middle">FAS 1/2/3 Split Clusters</text>
        <text x="837" y="620" font-family="Arial" font-size="11" text-anchor="middle">Checkpoint Artifacts</text>
    </g>

    <!-- Infrastructure Layer -->
    <g filter="url(#dropShadow)">
        <rect x="50" y="680" width="900" height="80" fill="#f5f5f5" stroke="#616161" stroke-width="2" rx="10"/>
        <text x="500" y="705" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#424242">High-Performance Computing Infrastructure</text>
        <text x="500" y="730" font-family="Arial" font-size="12" text-anchor="middle" fill="#616161">Ubuntu 24.04 LTS | NVIDIA CUDA Core | PyTorch 2.0+ | Anaconda Environment | GDAL & Proj Spatial Libs</text>
    </g>

    <!-- Connecting Arrows -->
    <path d="M 500 120 L 500 150" stroke="#546e7a" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 500 270 L 500 300" stroke="#546e7a" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 270 450 L 270 480" stroke="#546e7a" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 730 450 L 730 480" stroke="#546e7a" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
</svg>
