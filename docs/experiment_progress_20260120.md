# å®éªŒè¿›å±•è·Ÿè¸ª - 2026-01-20

## å·¥ä½œæ€»ç»“

### å·²å®Œæˆä»»åŠ¡ âœ…

#### 1. å¯è§†åŒ–å·¥å…·æ”¹è¿›
- âœ… å®ç°sample selectionåŠŸèƒ½ï¼ˆæŒ‰ç´¢å¼•æˆ–æ–‡ä»¶+æ ·æœ¬ç´¢å¼•ï¼‰
- âœ… å®ç°manifest.jsonlç”Ÿæˆï¼ˆè®°å½•sample identityå’ŒæŒ‡æ ‡ï¼‰
- âœ… éªŒè¯åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- **æˆæœ**: å¯å¤ç°çš„å®éªŒè·Ÿè¸ªï¼Œæ”¯æŒè·¨å®éªŒå¯¹æ¯”åŒä¸€æ ·æœ¬

#### 2. ç›´çº¿åŒ–åå·®å®šé‡åˆ†æ
- âœ… å…¨æ ·æœ¬ç»Ÿè®¡ï¼ˆn=50ï¼‰: é¢„æµ‹ç›´çº¿åŒ–88% vs GT 56%
- âœ… å¼¯æ›²è½¨è¿¹å­é›†ï¼ˆn=20ï¼‰: é¢„æµ‹ç›´çº¿åŒ–70% vs GT 0%
- âœ… æ€§èƒ½å¯¹æ¯”: TerraTNT ADEâ‰ˆ2990m vs ç›´çº¿åŸºçº¿â‰ˆ3061m
- **ç»“è®º**: æ¨¡å‹ä¸¥é‡ä¾èµ–ç›´çº¿æ·å¾„ï¼Œæœªå­¦ä¹ å¼¯æ›²æ¨¡å¼

#### 3. ç¯å¢ƒç‰¹å¾åˆ©ç”¨è¯„ä¼°
- âœ… ç¯å¢ƒæ¶ˆèå®éªŒï¼ˆzero_allï¼‰: æ€§èƒ½å®Œå…¨æ— å˜åŒ–
- âœ… å¯¹æ¯”æ­£å¸¸vsæ¶ˆè: ADEå·®å¼‚<1%
- **ç»“è®º**: ç¯å¢ƒç‰¹å¾æœªè¢«æœ‰æ•ˆåˆ©ç”¨

#### 4. ä¸»æµæ¨¡å‹æ¶æ„åˆ†æ
- âœ… å®Œæˆæ–‡æ¡£: `docs/trajectory_models_analysis.md`
- âœ… å¯¹æ¯”5ä¸ªä¸»æµæ¨¡å‹: Trajectron++, PECNet, AgentFormer, LaneGCN, HOME
- âœ… è¯†åˆ«TerraTNTçš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿
- **å…³é”®å‘ç°**: Goal vectoræ³¨å…¥è¿‡å¼ºæ˜¯ä¸»è¦é—®é¢˜

#### 5. Goal Vectorä¼˜åŒ–å®ç°
- âœ… åœ¨PaperHierarchicalTrajectoryDecoderä¸­æ·»åŠ `goal_vec_scale`å‚æ•°
- âœ… åˆå§‹å€¼è®¾ä¸º0.5ï¼ˆé™ä½ç›®æ ‡å¼•å¯¼å¼ºåº¦ï¼‰
- âœ… æ”¯æŒschedule: 0.5 -> 1.0 over epochs
- âœ… è®­ç»ƒè„šæœ¬å·²æ”¯æŒoverrideã€freezeå’ŒscheduleåŠŸèƒ½
- **ä»£ç å˜æ›´**: `models/terratnt.py` lines 738-739, 846-850

#### 6. å®éªŒæŠ¥å‘Šæ–‡æ¡£
- âœ… å®Œæˆå®éªŒæŠ¥å‘Š: `docs/experiment_report_20260120.md`
- âœ… åŒ…å«å®šé‡åˆ†æã€æ ¹å› è¯Šæ–­ã€æ”¹è¿›æ–¹æ¡ˆ
- âœ… åˆ¶å®šçŸ­æœŸ/ä¸­æœŸ/é•¿æœŸæ”¹è¿›è®¡åˆ’

### è¿›è¡Œä¸­ä»»åŠ¡ ğŸ”„

#### 7. ä¼˜åŒ–æ¨¡å‹è®­ç»ƒ
- ğŸ”„ è®­ç»ƒä»»åŠ¡å·²å¯åŠ¨ï¼ˆPID: 37745ï¼‰
- é…ç½®:
  - goal_vec_scale: 0.5 -> 1.0 (15 epochs)
  - waypoint_stride: 18 (vs 36 baseline)
  - sample_fraction: 0.2
  - epochs: 30
- é¢„æœŸå®Œæˆæ—¶é—´: ~2-4å°æ—¶
- æ—¥å¿—: `runs/train_goal_scale_opt.log`

### å¾…å®Œæˆä»»åŠ¡ ğŸ“‹

#### 8. è¯„ä¼°ä¼˜åŒ–æ•ˆæœ
- [ ] è¿è¡Œå¯è§†åŒ–è„šæœ¬è¯„ä¼°æ–°æ¨¡å‹
- [ ] å¯¹æ¯”æŒ‡æ ‡:
  - ADE / FDE
  - ç›´çº¿åŒ–æ¯”ä¾‹ (straight_frac)
  - å¼¯æ›²åº¦ (mean_norm_dev)
  - ç¯å¢ƒæ¶ˆèæ€§èƒ½ä¸‹é™
- [ ] ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š

#### 9. è¿­ä»£æ”¹è¿›
- [ ] æ ¹æ®è¯„ä¼°ç»“æœè°ƒæ•´å‚æ•°
- [ ] å¯èƒ½çš„ä¸‹ä¸€æ­¥:
  - è¿›ä¸€æ­¥å‡å°waypoint_stride (18 -> 12)
  - å¢åŠ curvature_consistency_lossæƒé‡
  - ä¿®å¤env_local_scale2å‚æ•°
  - å®ç°å¤šæ¨¡æ€é¢„æµ‹

---

## å…³é”®å‘ç°

### é—®é¢˜è¯Šæ–­

**ç›´çº¿åŒ–åå·®æ ¹å› **:
1. ğŸ”´ **Goal vectoræ³¨å…¥è¿‡å¼º** (å·²ä¿®å¤)
   - æ— å¯å­¦ä¹ ç¼©æ”¾å› å­ â†’ æ·»åŠ goal_vec_scale
   - ç›´æ¥åŠ åˆ°base_input â†’ ç°åœ¨å¯è°ƒèŠ‚å¼ºåº¦
   
2. ğŸŸ¡ **Waypoint strideè¿‡å¤§** (å·²æ”¹è¿›)
   - åŸå€¼36 â†’ æ–°å€¼18
   - ä¸­é—´è·¯ç‚¹ä»~2ä¸ªå¢åŠ åˆ°~4ä¸ª
   
3. ğŸ”´ **å±€éƒ¨ç¯å¢ƒç‰¹å¾æœªè®­ç»ƒ** (å¾…ä¿®å¤)
   - env_local_scale2å‚æ•°ç¼ºå¤±
   - éœ€è¦åœ¨åç»­å®éªŒä¸­ä¿®å¤

4. ğŸŸ¡ **è®­ç»ƒç­–ç•¥é—®é¢˜** (å¾…ä¼˜åŒ–)
   - Teacher forcing scheduleå¯èƒ½éœ€è¦è°ƒæ•´
   - æŸå¤±å‡½æ•°æƒé‡éœ€è¦ä¼˜åŒ–

**ç¯å¢ƒç‰¹å¾åˆ©ç”¨å¤±è´¥åŸå› **:
- Goal vectorå‹åˆ¶ç¯å¢ƒç‰¹å¾å½±å“
- CNNç¼–ç å™¨å®¹é‡å¯èƒ½ä¸è¶³
- åˆ†è¾¨ç‡è¾ƒä½ï¼ˆä½†å¯¹100kmå°ºåº¦å¯èƒ½è¶³å¤Ÿï¼‰

### æ”¹è¿›ç­–ç•¥

**å·²å®æ–½**:
- âœ… Goal vectorå¯å­¦ä¹ ç¼©æ”¾ï¼ˆåˆå§‹0.5ï¼‰
- âœ… Scheduleé€æ­¥å¢å¼ºï¼ˆ0.5 -> 1.0ï¼‰
- âœ… å‡å°waypoint strideï¼ˆ36 -> 18ï¼‰

**è®¡åˆ’å®æ–½**:
- ğŸ“‹ ä¿®å¤env_local_scale2å‚æ•°
- ğŸ“‹ å¢åŠ curvature_consistency_lossæƒé‡
- ğŸ“‹ å®ç°å¤šæ¨¡æ€é¢„æµ‹ï¼ˆVAEï¼‰
- ğŸ“‹ æ·»åŠ spatial attentionæœºåˆ¶

---

## å®éªŒæ•°æ®

### Baselineæ€§èƒ½ï¼ˆCheckpoint: 20260119_234859ï¼‰

| æŒ‡æ ‡ | å…¨æ ·æœ¬ (n=50) | å¼¯æ›²æ ·æœ¬ (n=20) |
|------|---------------|-----------------|
| **ADE (m)** | 3483.2 | 2990.4 |
| **FDE (m)** | 2768.4 | 2234.7 |
| **GT straight_frac** | 56.0% | 0.0% |
| **Pred straight_frac** | 88.0% | 70.0% |
| **GT mean_norm_dev** | 0.0721 | 0.1210 |
| **Pred mean_norm_dev** | 0.0401 | 0.0613 |

### ç¯å¢ƒæ¶ˆèç»“æœ

| é…ç½® | ADE (m) | æ€§èƒ½å˜åŒ– |
|------|---------|----------|
| æ­£å¸¸ | 3483.2 | - |
| Zero all | 3483.2 | 0.0% |

### ç›®æ ‡æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | çŸ­æœŸç›®æ ‡ (1-2å‘¨) | ä¸­æœŸç›®æ ‡ (1-2æœˆ) | é•¿æœŸç›®æ ‡ (3-6æœˆ) |
|------|------------------|------------------|------------------|
| **ADE** | <2500m | <1500m | <500m |
| **Straight frac** | <70% | ~60% (æ¥è¿‘GT) | ~60% |
| **ç¯å¢ƒæ¶ˆèå½±å“** | >10% | >20% | >30% |

---

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡æ¡£
1. `docs/trajectory_models_analysis.md` - ä¸»æµæ¨¡å‹æ¶æ„å¯¹æ¯”åˆ†æ
2. `docs/experiment_report_20260120.md` - å®éªŒè¯Šæ–­ä¸æ”¹è¿›æ–¹æ¡ˆ
3. `docs/experiment_progress_20260120.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹ä»£ç 
1. `models/terratnt.py` - æ·»åŠ goal_vec_scaleå‚æ•°
2. `scripts/visualize_terratnt_predictions.py` - æ·»åŠ sample selectionå’Œmanifestç”Ÿæˆ

### è®­ç»ƒè„šæœ¬
1. `scripts/train_goal_scale_optimized.sh` - Goal scaleä¼˜åŒ–è®­ç»ƒè„šæœ¬

### å®éªŒè¾“å‡º
1. `viz_test/` - å¯è§†åŒ–æµ‹è¯•è¾“å‡º
2. `viz_test_specific/` - ç‰¹å®šæ ·æœ¬å¯è§†åŒ–
3. `viz_curved_analysis/` - å¼¯æ›²è½¨è¿¹åˆ†æ
4. `viz_ablation_zero/` - ç¯å¢ƒæ¶ˆèå®éªŒ
5. `runs/train_goal_scale_opt.log` - å½“å‰è®­ç»ƒæ—¥å¿—

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ï¼ˆè®­ç»ƒå®Œæˆåï¼‰
1. æ£€æŸ¥è®­ç»ƒæ—¥å¿—ï¼Œç¡®è®¤æ”¶æ•›æƒ…å†µ
2. è¿è¡Œå¯è§†åŒ–è¯„ä¼°æ–°æ¨¡å‹æ€§èƒ½
3. å¯¹æ¯”baselineå’Œä¼˜åŒ–æ¨¡å‹çš„æŒ‡æ ‡
4. ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Šå’Œå¯è§†åŒ–å›¾è¡¨

### çŸ­æœŸè®¡åˆ’ï¼ˆæœ¬å‘¨ï¼‰
1. æ ¹æ®è¯„ä¼°ç»“æœè°ƒæ•´å‚æ•°
2. ä¿®å¤env_local_scale2å‚æ•°
3. å®éªŒä¸åŒçš„waypoint_strideå€¼
4. ä¼˜åŒ–æŸå¤±å‡½æ•°æƒé‡

### ä¸­æœŸè®¡åˆ’ï¼ˆä¸‹å‘¨ï¼‰
1. å®ç°å¤šæ¨¡æ€é¢„æµ‹ï¼ˆVAEï¼‰
2. æ·»åŠ spatial attentionæœºåˆ¶
3. é›†æˆPECNet baselineå¯¹æ¯”
4. è·¨åŒºåŸŸæ³›åŒ–æµ‹è¯•

---

## ç›‘æ§å‘½ä»¤

### æ£€æŸ¥è®­ç»ƒè¿›åº¦
```bash
# æŸ¥çœ‹è®­ç»ƒæ—¥å¿—
tail -f runs/train_goal_scale_opt.log

# æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ
nvidia-smi

# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€
ps aux | grep python | grep train_terratnt
```

### è®­ç»ƒå®Œæˆåè¯„ä¼°
```bash
# æ‰¾åˆ°æœ€æ–°checkpoint
CKPT=$(ls -t runs/terratnt_fas3_10s/terratnt_goal_scale_opt_*/best_model.pth | head -1)

# è¿è¡Œå¯è§†åŒ–è¯„ä¼°
conda run -n torch-sm120 python scripts/visualize_terratnt_predictions.py \
  --checkpoint ${CKPT} \
  --region bohemian_forest \
  --num_samples 50 \
  --only_curved \
  --curvature_threshold 0.08 \
  --output_dir ${CKPT%/*}/viz_eval

# è¿è¡Œç¯å¢ƒæ¶ˆèå®éªŒ
conda run -n torch-sm120 python scripts/visualize_terratnt_predictions.py \
  --checkpoint ${CKPT} \
  --region bohemian_forest \
  --num_samples 50 \
  --env_ablation zero_all \
  --stats_only \
  --output_dir ${CKPT%/*}/viz_ablation
```

---

**æœ€åæ›´æ–°**: 2026-01-20 21:45  
**çŠ¶æ€**: è®­ç»ƒè¿›è¡Œä¸­ï¼Œç­‰å¾…ç»“æœè¯„ä¼°
